---
- hosts: "{{ rhel_nodes }}"
  become: false
  tasks:
  - name: Create temporary directory for file transfers
    tempfile:
      state: directory
      suffix: .temp
    run_once: true
    delegate_to: localhost
    connection: local
    register: temp_transfer_01

  - debug: msg="temp dir ==> {{ temp_transfer_01.path }}"
    run_once: true
    delegate_to: localhost
    connection: local

  - name: verify operating system
    assert:
      that: "ansible_distribution == 'RedHat'"

  - include: c2r_subtasks.yml full_file_path={{ item }}
    run_once: yes
    with_items:
    - "/etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release"
    - "/etc/pki/entitlement/*.pem"
    - "/etc/yum.repos.d/redhat.repo"

- hosts: "{{ centos_nodes }}"
  become: true
  tasks:
  - name: verify operating system
    assert:
      that: "ansible_distribution == 'CentOS'"
